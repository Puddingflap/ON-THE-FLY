<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>ASTER OID</title>
  <style>
    :root{
      --bg:#070b14; /* deep space */
      --fg:#e8f0ff;
      --accent:#6ee7ff; /* neon blue */
      --accent2:#ffcc6e; /* warm highlight */
      --danger:#ff6e6e;
      --muted:#6b7280;
      --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    html,body{height:100%;margin:0}
    body{
      background: radial-gradient(1200px 800px at 70% 20%, rgba(110,231,255,.06), transparent), var(--bg);
      color:var(--fg);
      font-family: system-ui, sans-serif;
      overflow:hidden;
    }
    #wrap{position:fixed; inset:0; display:grid; place-items:center}
    canvas{ width: min(100vw, 100vh*0.5625); height: min(100vh, 100vw/0.5625); max-width:100vw; max-height:100vh; box-shadow: var(--shadow); border-radius: 18px; background: transparent; }
    .hud{position:fixed; inset:0; pointer-events:none; display:flex; align-items:center; justify-content:center;}
    .panel{pointer-events:auto; position:absolute; top:24px; left:50%; transform:translateX(-50%); background: rgba(8,12,22,.6); border:1px solid rgba(255,255,255,.08); backdrop-filter: blur(6px); padding:10px 14px; border-radius:14px; display:flex; gap:18px; align-items:center}
    .panel .pill{background:rgba(255,255,255,.08); padding:6px 10px; border-radius:999px; font-weight:700; letter-spacing:.3px}
    .panel .sep{opacity:.3}
    .btn{
      pointer-events:auto; position:absolute; bottom:24px; left:50%; transform:translateX(-50%);
      background:linear-gradient(180deg, rgba(110,231,255,.18), rgba(110,231,255,.12));
      border:1px solid rgba(110,231,255,.4); color:var(--fg); font-weight:700; letter-spacing:.3px;
      padding:12px 18px; border-radius:14px; box-shadow: var(--shadow); text-decoration:none;
    }
    .hint{position:absolute; bottom:86px; left:50%; transform:translateX(-50%); color:var(--muted); font-size:14px}
    .title{position:absolute; top:50%; left:50%; transform:translate(-50%, -60%); text-align:center}
    h1{margin:0 0 6px 0; font-size: clamp(28px, 6vw, 48px)}
    .subtitle{opacity:.75}
    .toast{position:absolute; top:14px; right:14px; background:rgba(255,110,110,.12); border:1px solid rgba(255,110,110,.35); color:#ffd3d3; padding:8px 12px; border-radius:12px; font-size:12px}
  </style>
</head>
<body>
  <div id="wrap">
    <canvas id="game" width="1280" height="720" aria-label="ASTER OID"></canvas>
  </div>
  <div class="hud" aria-live="polite">
    <div class="panel" id="scorePanel" hidden>
      <span class="pill">Score: <span id="score">0</span></span>
      <span class="sep">â€¢</span>
      <span class="pill">Best: <span id="best">0</span></span>
    </div>
    <div class="title" id="title">
      <h1>ðŸ’« ASTER OID</h1>
      <div class="subtitle">Tap/Click or press <strong>SPACE</strong> to boost</div>
    </div>
    <div class="hint" id="hint">Tip: stay centered, read the gaps, boost at the last moment.</div>
    <button class="btn" id="startBtn" aria-label="Start game (or press space)">Start</button>
    <div class="toast" id="pauseToast" hidden>Game paused (tab not active)</div>
  </div>

<script>
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  const W0 = canvas.width, H0 = canvas.height;
  function resize() {
    const rect = canvas.getBoundingClientRect();
    canvas.width = Math.round(rect.width * DPR);
    canvas.height = Math.round(rect.height * DPR);
  }
  resize();
  window.addEventListener('resize', resize);

  const G = 2600;
  const FLAP_VY = -850;
  const MAX_DROP = 1200;
  const PIPE_GAP = 290;
  const PIPE_W = 120;
  const PIPE_SPACING = 420;
  const SCROLL_SPEED = 180;
  const AST = { r: 28, x: 200, y: 300 };

  let state = 'start';
  let score = 0, best = +(localStorage.getItem('aster-oid-best')||0);
  let tPrev = 0, speed = SCROLL_SPEED, paused = false;

  const ui = {
    scorePanel: document.getElementById('scorePanel'),
    score: document.getElementById('score'),
    best: document.getElementById('best'),
    startBtn: document.getElementById('startBtn'),
    title: document.getElementById('title'),
    hint: document.getElementById('hint'),
    pauseToast: document.getElementById('pauseToast')
  };
  ui.best.textContent = best;

  const stars = Array.from({length: 120}, () => ({
    x: Math.random()*canvas.width,
    y: Math.random()*canvas.height,
    z: 0.3 + Math.random()*0.7,
    r: 0.6 + Math.random()*1.8,
  }));

  // ---- Nieuw: afbeelding laden ----
  const czImg = new Image();
  czImg.src = 'cz-droid.png';

  const player = {
    x: AST.x, y: AST.y, r: AST.r,
    vy: 0,
    rot: 0,
    alive: true,
    flap(){
      this.vy = FLAP_VY;
    },
    update(dt){
      this.vy = Math.min(this.vy + G*dt, MAX_DROP);
      this.y += this.vy * dt;
      this.rot = Math.max(-0.6, Math.min(0.9, this.vy/900));
    },
    draw(){
      ctx.save();
      ctx.translate(this.x*DPR, this.y*DPR);
      ctx.rotate(this.rot);
      const r = this.r * DPR;
      if (czImg.complete) {
        ctx.drawImage(czImg, -r, -r, r*2, r*2);
      } else {
        ctx.fillStyle = '#ffcc6e';
        ctx.beginPath();
        ctx.arc(0,0,r,0,Math.PI*2);
        ctx.fill();
      }
      ctx.restore();
    }
  };

  function setUI(){
    const isStartOrDead = state === 'start';
    ui.title.style.display = isStartOrDead ? '' : 'none';
    ui.hint.style.display = isStartOrDead ? '' : 'none';
    ui.startBtn.style.display = isStartOrDead ? '' : 'none';
    ui.scorePanel.hidden = state !== 'playing';
  }

  function startGame() {
    state = 'playing';
    score = 0; speed = SCROLL_SPEED; tPrev = 0;
    player.y = AST.y; player.vy = 0; player.alive = true;
    setUI();
  }

  function boost() {
    if (state === 'start') { startGame(); }
    else if (state === 'playing') { player.flap(); }
  }

  window.addEventListener('keydown', e => {
    if (['Space', 'ArrowUp', 'KeyW'].includes(e.code)) { e.preventDefault(); boost(); }
  });
  window.addEventListener('pointerdown', e => { if (e.target === canvas) boost(); });
  ui.startBtn.addEventListener('click', boost);

  document.addEventListener('visibilitychange', () => {
    paused = document.hidden;
    ui.pauseToast.hidden = !paused;
  });

  function update(dt) {
    player.update(dt);
  }

  function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = '#05070f';
    ctx.fillRect(0,0,canvas.width,canvas.height);
    for (const s of stars) {
      s.x -= (speed * s.z * 0.08) * (1 / 60) * DPR;
      if (s.x < -2) { s.x = canvas.width + Math.random() * 40; s.y = Math.random() * canvas.height; }
      ctx.globalAlpha = 0.5 + s.z * 0.5;
      ctx.beginPath(); ctx.arc(s.x, s.y, s.r * DPR, 0, Math.PI * 2); ctx.fillStyle = '#e8f0ff'; ctx.fill();
    }
    ctx.globalAlpha = 1;
    player.draw();
  }

  function loop(ts) {
    if (paused) {
      tPrev = ts;
      requestAnimationFrame(loop);
      return;
    }
    const dt = Math.min(0.033, (tPrev ? (ts - tPrev) / 1000 : 0.016));
    tPrev = ts;
    if (state === 'playing') update(dt);
    draw();
    requestAnimationFrame(loop);
  }
  setUI();
  requestAnimationFrame(loop);
})();
</script>
</body>
</html>
